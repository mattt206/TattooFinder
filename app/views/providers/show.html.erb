<div class="container">
  <div class="row">

 <!---studio profile---->

    <div class="col-8 mb-2">
          <div class="card" >
            <% if @provider.photos.attached? %>
              <div class="row">
                <% @provider.photos.each do |photo|  %>
                  <div class="col-md-6">
                    <%= cl_image_tag photo.key, class: "card-img-top img-fluid" %>
                  </div>
                  <% end %>
              </div>
            <% else %>
              <%= image_tag "unknow.png", class: "card-img-top img-fluid" %>
            <% end %>
            <div class="card-body" style="background-color:grey;">
              <div>
                <h3 class="card-title" style="background-color:black;"><%= @provider.name %></h3>
              </div>
                <p> <%= @provider.description %>  </p>

                <h4> Categories:  </h4>
                 <div class="m-2">
                  <% @provider.category.each do |category| %>
                    <span class="badge badge-pill badge-light"> <%= category %> </span>
                  <% end %>
                 </div>
              <div class="m-2">
                  <%= link_to "Back", providers_path, class: "btn btn-outline-dark"%>
                  <%= link_to "Edit", edit_provider_path(@provider), class: "btn btn-outline-dark" %>
                  <%= link_to "Delete", provider_path(@provider), class: "btn btn-warning mx-2", data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
              </div>

            </div>
          </div>


    </div>
    <!---- mapa  --->
    <div class = "col-4 mb-2" style="background-color:grey;">
      <%= @provider.latitude %>
      <%= @provider.longitude %>
    </div>
  </div>
  <!---- artistas del studio  --->
      <div class="row">
          <div class="col-8 mb-2">
            <div class="card" >
              <div class="card-body" style="background-color:grey;">


                <% @users.each do |user|   %>
                  <% if user.provider_id == @provider.id %>
                    <div class = "card" style="background-color:black;">
                      <p> nickname </p><%= user.nickname %>

                      <%= simple_form_for provider_path(@provider), method: :get do |f| %>
                        <%= f.hidden_field :provider_id, value: user.id, name: "artist" %>
                        <div class="form-actions d-flex justify-content-center">
                          <%#= f.button :submit, "Artist profile", class: "btn btn-success mx-2 my-3"%>
                          <%#= link_to "profile",  profile_path %>
                        </div>
              </div>
              <%= link_to "Artist profile", profile_path(user.id), class: "btn btn-outline-dark"%>
            </div>
                      <% end %>

                    </div>
                    <% end %>
                  <% end %>
              <!-- @provider.user iterar sobre cada uno y agregar nuevos -->


          </div>

        </div>

 <!---- add new artist to your studio  --->
        <div class = "col-12 mb-2" style="background-color:grey;" >
              <p>add new artist</p>
            <%= form_tag provider_path(@provider), method: :get do  %>
              <%= text_field_tag :query, params[:query], class: "form-control", placeholder: "nickname" %>
              <%= submit_tag "Search", class: "btn btn-primary" %>
            <% end %>
            <% @users.each do |user| %>
              <div class="mx-auto card p-3 my-3 text-black d-flex flex-row align-items-center justify-content-around w-25">
                <%= user.nickname %>

                  <%= simple_form_for provider_path(@provider), url: provider_path(@provider), method: :get do |f| %>
                    <%= f.hidden_field :provider_id, value: user.id, name: "artist" %>

                    <div class="form-actions d-flex justify-content-center">
                      <%= f.button :submit, "Save", class: "btn btn-success mx-2 my-3"%>
                    </div>
                  <% end %>

              </div>

            <% end %>


          </div>
        </div>
    </div>



</div>
